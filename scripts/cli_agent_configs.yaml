- id: "architect.spawn_factory_worker"
  name: "Architect Factory Worker"
  provider: "factory"
  model_name: "claude-3.5-sonnet"
  timeout_seconds: 600
  required_credentials: 
    - "GITHUB_TOKEN"
  provider_settings:
    autonomy: "high"
  prompt_template: |
    # Project: {project_name}

    ## Description
    {description}

    ## Requirements
    - Modules: {modules}
    - Entry Points: {entry_points}

    ## Task
    Initialize this repository using the `service-template` framework.

    1.  **Initialize Project via Copier**:
        - The template is located at `gh:vladmesh/service-template`.
        - Use `copier` to generate the project structure.
        - Run: `copier copy gh:vladmesh/service-template . \
          --data project_name={project_name} \
          --data modules={modules_csv} \
          --trust` (adjust modules as needed).
        - If `copier` is not installed, install it: `pip install copier`.

    2.  **Define Domain Specifications**:
        - Create YAML specifications in `shared/spec/` (or `domains/` if you prefer,
          but template uses `shared/spec`).
        - Define entities, aggregates, and services.

    3.  **Setup Configuration**:
        - Ensure `.env` is created from `.env.example`.
        - Ensure `docker-compose.yml` is present (generated by copier).

    4.  **Push Changes**:
        - You **MUST** commit and push your changes to the repository.
        - Run: `git add .`
        - Run: `git commit -m "Initial project structure"` (if not already committed)
        - Run: `git push`

    {extra_instructions}

    ## Important
    - **DO NOT** create a manual structure. You **MUST** use the `service-template`.
    - Read `AGENTS.md` (if available in template) for context.
    - All code should be async-ready (Python 3.12+).

    ## Commit Message
    Initial project structure for {project_name} using service-template
