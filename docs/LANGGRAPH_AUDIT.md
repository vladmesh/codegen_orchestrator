# ĞÑƒĞ´Ğ¸Ñ‚ ÑĞµÑ€Ğ²Ğ¸ÑĞ° LangGraph

**Ğ”Ğ°Ñ‚Ğ°:** 2025-12-30  
**ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾:** 2025-12-30  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Ğ’ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

## ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ

| Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | Ğ”Ğ°Ñ‚Ğ° |
|--------|--------|------|
| 7.2. Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ | âœ… Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ | 2024-12-30 |
| 7.3. Ğ Ğ°Ğ·Ğ±Ğ¸Ñ‚ÑŒ ProvisionerNode.run() | âœ… Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ | 2024-12-30 |
| 7.1. Ğ’Ñ‹Ğ½ĞµÑÑ‚Ğ¸ provisioner Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ | â³ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ | - |
| 7.4. Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ ToolExecutor Ğ¸Ğ· LLMNode | â³ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ | - |
| 7.5. Ğ£ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ†Ğ¸ĞºĞ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ | â³ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ | - |
| 7.6. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | â³ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ | - |
| 7.7. Ğ ĞµÑˆĞ¸Ñ‚ÑŒ TODO/FIXME | â³ ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ | - |

---

## Ğ ĞµĞ·ÑĞ¼Ğµ

Ğ¡ĞµÑ€Ğ²Ğ¸Ñ langgraph ÑĞ²Ğ»ÑĞµÑ‚ÑÑ ÑĞ°Ğ¼Ñ‹Ğ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğ¼ Ğ¸ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¼ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ¼ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ (14,588 ÑÑ‚Ñ€Ğ¾Ğº, 106 Python Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²). ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:

1. **Ğ¢ÑĞ¶Ñ‘Ğ»Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸** â€” ansible-core Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ² ÑĞµÑ€Ğ²Ğ¸Ñ, Ñ…Ğ¾Ñ‚Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ°Ğº CLI
2. **ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ SRP** â€” provisioner Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ½Ğµ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ÑÑ Ğº LLM Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
3. **Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹** â€” 6 Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞ°ÑÑ‚ 400 ÑÑ‚Ñ€Ğ¾Ğº
4. **Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°** â€” hardcoded Ğ¿ÑƒÑ‚Ğ¸, Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑÑ‰Ğ°ÑÑÑ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° SSH/HTTP
5. **God-objects** â€” ĞºĞ»Ğ°ÑÑÑ‹ Ñ Ğ¸Ğ·Ğ±Ñ‹Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒÑ

---

## 1. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ÑĞµÑ€Ğ²Ğ¸ÑĞ°

```
langgraph/src/           # 14,588 ÑÑ‚Ñ€Ğ¾Ğº
â”œâ”€â”€ graph.py             # 642 ÑÑ‚Ñ€Ğ¾Ğº - Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ñ„
â”œâ”€â”€ worker.py            # 534 ÑÑ‚Ñ€Ğ¾Ğº - Worker Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
â”œâ”€â”€ session_manager.py   # 221 ÑÑ‚Ñ€Ğ¾Ğº
â”‚
â”œâ”€â”€ nodes/               # LLM ÑƒĞ·Ğ»Ñ‹ Ğ³Ñ€Ğ°Ñ„Ğ°
â”‚   â”œâ”€â”€ base.py          # 383 ÑÑ‚Ñ€Ğ¾Ğº - God-object
â”‚   â”œâ”€â”€ architect.py     # 210 ÑÑ‚Ñ€Ğ¾Ğº
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ provisioner/         # ĞĞ• ĞĞ¢ĞĞĞ¡Ğ˜Ğ¢Ğ¡Ğ¯ Ğš LLM!
â”‚   â”œâ”€â”€ node.py          # 489 ÑÑ‚Ñ€Ğ¾Ğº (!)
â”‚   â”œâ”€â”€ ansible_runner.py
â”‚   â”œâ”€â”€ ssh.py
â”‚   â””â”€â”€ recovery.py      # 213 ÑÑ‚Ñ€Ğ¾Ğº
â”‚
â”œâ”€â”€ subgraphs/
â”‚   â”œâ”€â”€ devops.py        # 596 ÑÑ‚Ñ€Ğ¾Ğº
â”‚   â””â”€â”€ engineering.py   # 312 ÑÑ‚Ñ€Ğ¾Ğº
â”‚
â”œâ”€â”€ tools/               # 11 Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
â”‚   â”œâ”€â”€ activation.py    # 324 ÑÑ‚Ñ€Ğ¾Ğº
â”‚   â”œâ”€â”€ devops_tools.py  # 263 ÑÑ‚Ñ€Ğ¾Ğº
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ clients/             # API ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹
â”‚   â”œâ”€â”€ api.py
â”‚   â”œâ”€â”€ infra_client.py  # 277 ÑÑ‚Ñ€Ğ¾Ğº - SSH Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ capabilities/        # Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
    â””â”€â”€ base.py          # 337 ÑÑ‚Ñ€Ğ¾Ğº
```

---

## 2. ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

### 2.1. ansible-core Ğ² LangGraph ÑĞµÑ€Ğ²Ğ¸ÑĞµ

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ¢ÑĞ¶Ñ‘Ğ»Ğ°Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ ansible-core (43 Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ°ĞºĞµÑ‚Ğ°, ~40 MB) Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² langgraph, Ñ…Ğ¾Ñ‚Ñ:
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ°Ğº CLI ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° `ansible-playbook` Ñ‡ĞµÑ€ĞµĞ· subprocess
- Python Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸ ansible ĞĞ• Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒÑÑ‚ÑÑ
- ĞĞµ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ Ğº LLM Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸

**ĞœĞµÑÑ‚Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
- `src/provisioner/ansible_runner.py:70` â€” subprocess.run(["ansible-playbook", ...])
- `src/tools/devops_tools.py:152` â€” Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ²

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** Ğ’Ñ‹Ğ½ĞµÑÑ‚Ğ¸ Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ `infrastructure-worker` ÑĞµÑ€Ğ²Ğ¸Ñ.

### 2.2. Provisioner Ğ½Ğµ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ÑÑ Ğº LangGraph

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ `src/provisioner/` (8 Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ², ~1,500 ÑÑ‚Ñ€Ğ¾Ğº) ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:
- Ğ›Ğ¾Ğ³Ğ¸ĞºÑƒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ansible
- SSH Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½Ñ†Ğ¸Ğ´ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸
- Recovery Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ

Ğ­Ñ‚Ğ¾ **Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´**, Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‰Ğ¸Ğ¹ LLM/LangGraph.

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** ĞŸĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸ Ğ² ÑĞµÑ€Ğ²Ğ¸Ñ `infrastructure` Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ `provisioner-worker`.

### 2.3. infra_client.py â€” SSH Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ² LangGraph

**Ğ¤Ğ°Ğ¹Ğ»:** `src/clients/infra_client.py` (277 ÑÑ‚Ñ€Ğ¾Ğº)

Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚:
- `run_ssh_command()` â€” 57 ÑÑ‚Ñ€Ğ¾Ğº
- `get_container_status()` â€” 58 ÑÑ‚Ñ€Ğ¾Ğº
- `get_container_stats()` â€” 56 ÑÑ‚Ñ€Ğ¾Ğº

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** SSH Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğ°Ñ… Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒÑÑ Ğ¸Ğ· LLM ÑĞµÑ€Ğ²Ğ¸ÑĞ°.

---

## 3. Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‰Ğ¸Ğµ Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

### 3.1. Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ (>400 ÑÑ‚Ñ€Ğ¾Ğº)

| Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ñ€Ğ¾Ğº | ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° |
|------|-------|----------|
| `graph.py` | 642 | ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ³Ñ€Ğ°Ñ„, Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ´ĞµĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ |
| `subgraphs/devops.py` | 596 | ĞœĞ½Ğ¾Ğ³Ğ¾ inline Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ |
| `worker.py` | 534 | Ğ¡Ğ¼ĞµÑˆĞ¸Ğ²Ğ°ĞµÑ‚ transport Ğ¸ business logic |
| `provisioner/node.py` | 489 | God-method run() Ğ½Ğ° 215 ÑÑ‚Ñ€Ğ¾Ğº |
| `nodes/base.py` | 383 | God-object Ñ 3 Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸ |
| `capabilities/base.py` | 337 | ĞœĞ¾Ğ¶Ğ½Ğ¾ ÑƒĞ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ñ‚ÑŒ |

### 3.2. God-methods (>50 ÑÑ‚Ñ€Ğ¾Ğº)

| ĞœĞµÑ‚Ğ¾Ğ´ | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ñ€Ğ¾Ğº | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|-------|------|-------|--------|
| ~~`ProvisionerNode.run()`~~ | provisioner/node.py | ~~215~~ â†’ 50 | âœ… Ğ Ğ°Ğ·Ğ±Ğ¸Ñ‚ |
| `reinstall_and_provision()` | provisioner/node.py:85 | 112 | â³ |
| `handle_provisioning_success()` | provisioner/node.py:197 | 71 | â³ |
| `activate_project()` | tools/activation.py:109 | 70 | â³ |
| `inspect_repository()` | tools/activation.py:179 | 70 | â³ |
| `run_ssh_command()` | clients/infra_client.py:25 | 57 | â³ |

### 3.3. God-objects

**LLMNode** (`nodes/base.py:45-233`) â€” 3 Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:
1. Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ĞµĞ¹ (get_config, get_llm, get_system_prompt)
2. Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (execute_tools, _execute_single_tool)
3. Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ tools_map

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ `ToolExecutor` Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ.

---

## 4. Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ°

### 4.1. Hardcoded Ğ¿ÑƒÑ‚Ğ¸ (Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ² 4 Ğ¼ĞµÑÑ‚Ğ°Ñ…)

```python
# provisioner/recovery.py:43
playbook_path = "/app/services/infrastructure/ansible/playbooks/deploy_project.yml"

# tools/devops_tools.py:152
playbook_path = "/app/services/infrastructure/ansible/playbooks/deploy_project.yml"

# clients/infra_client.py:21
SSH_KEY_PATH = "/root/.ssh/id_ed25519"

# tools/devops_tools.py:19
SSH_KEY_PATH = "/root/.ssh/id_ed25519"
```

### 4.2. Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ provisioning Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

`provisioner/node.py` Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´:
- Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 151-158 Ğ¸ 432-439 â€” Ğ·Ğ°Ğ¿ÑƒÑĞº Phase 1
- Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¸ 175-181 Ğ¸ 460-466 â€” Ğ·Ğ°Ğ¿ÑƒÑĞº Phase 2

---

## 5. Code Smells

### 5.1. ~~ĞœĞ°Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ‡Ğ¸ÑĞ»Ğ° Ğ±ĞµĞ· Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸~~ âœ… Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ

> **Ğ ĞµÑˆĞµĞ½Ğ¾ 2024-12-30:** Ğ’ÑĞµ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ñ‹ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ² `src/config/constants.py`:
> ```python
> class Timeouts:
>     SSH_COMMAND = 30
>     PROVISIONING = 1200
>     REINSTALL = 900
>     PASSWORD_RESET = 300
>     ACCESS_PHASE = 180
>     WORKER_SPAWN = 600
>     PREPARER_SPAWN = 120
>     SERVICE_DEPLOY = 300
> ```

### 5.2. Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¾Ğ±Ñ‰Ğ¸Ğµ except Ğ±Ğ»Ğ¾ĞºĞ¸

```python
# provisioner/node.py:75-82
except Exception as e:  # Ğ›Ğ¾Ğ²Ğ¸Ñ‚ Ğ’Ğ¡Ğ
    logger.error(...)
    return None

# tools/github.py:317
except Exception:  # noqa: S110
    pass  # Ğ˜Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ
```

### 5.3. Ğ¦Ğ¸ĞºĞ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ñ‹ (Ğ¾Ğ±Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ)

```python
# tools/infrastructure.py:44
def some_function():
    from ..capabilities.base import get_current_state  # Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

# tools/activation.py:127
def another_function():
    from .github import get_github_client  # Ğ¢Ğ¾Ğ¶Ğµ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
```

### 5.4. Unsafe dict access

```python
# provisioner/node.py:312-315
server_ip = server_info.get("public_ip") or server_info.get("host")  # None ĞµÑĞ»Ğ¸ Ğ¾Ğ±Ğ° Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚
os_template = server_info.get("os_template", "kvm-ubuntu-24.04-gpt-x86_64")  # Hardcoded default
```

### 5.5. TODO/FIXME Ğ² ĞºĞ¾Ğ´Ğµ

```python
# tools/deploy.py:184
# TODO: Read from LangGraph checkpointer when devops_subgraph is implemented

# tools/infrastructure.py:102
# TODO: Check ownership via project's user_id
```

---

## 6. Ğ”ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹

**langgraph/pyproject.toml ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ 185 Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²** Ğ¿Ğ¾ÑĞ»Ğµ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹.

### Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² shared:

| ĞŸĞ°ĞºĞµÑ‚ | langgraph | api | scheduler | telegram_bot |
|-------|-----------|-----|-----------|--------------|
| structlog | âœ“ | âœ“ | âœ“ | âœ“ |
| redis | âœ“ | âœ“ | âœ“ | âœ“ |
| httpx | âœ“ | âœ“ | âœ“ | âœ“ |
| pydantic | âœ“ | âœ“ | - | âœ“ |
| pyjwt | âœ“ | âœ“ | âœ“ | - |

### Ğ¢ÑĞ¶Ñ‘Ğ»Ñ‹Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² langgraph:

| ĞŸĞ°ĞºĞµÑ‚ | Ğ¢Ñ€Ğ°Ğ½Ğ·Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… | Ğ Ğ°Ğ·Ğ¼ĞµÑ€ |
|-------|--------------|--------|
| ansible-core | 43 | ~40 MB |
| langchain | 25 | ~15 MB |
| langgraph | 8 | ~5 MB |

---

## 7. Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ñƒ

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚: ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™

#### 7.1. Ğ’Ñ‹Ğ½ĞµÑÑ‚Ğ¸ provisioner Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ

**Ğ§Ñ‚Ğ¾ Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸:**
```
langgraph/src/provisioner/  â†’  infrastructure-worker/
langgraph/src/clients/infra_client.py  â†’  infrastructure-worker/
```

**Ğ¡Ñ…ĞµĞ¼Ğ° Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:**
```
scheduler â†’ Redis â†’ infrastructure-worker â†’ Ansible
              â†“
         langgraph (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ LLM Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°)
```

**Ğ’Ñ‹Ğ³Ğ¾Ğ´Ğ°:**
- Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ ansible-core Ğ¸Ğ· langgraph (-40 MB, -43 Ğ¿Ğ°ĞºĞµÑ‚Ğ°)
- Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸
- ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

#### 7.2. ~~Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹~~ âœ… Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ (2024-12-30)

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ `src/config/constants.py` Ñ ĞºĞ»Ğ°ÑÑĞ°Ğ¼Ğ¸:
- `Paths` â€” SSH_KEY, ANSIBLE_PLAYBOOKS, playbook()
- `Timeouts` â€” Ğ²ÑĞµ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ñ‹ Ñ env overrides
- `Provisioning` â€” MAX_RETRIES, DEFAULT_OS_TEMPLATE, etc.

ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹ Ñ„Ğ°Ğ¹Ğ»Ñ‹:
- `clients/infra_client.py`
- `clients/worker_spawner.py`
- `clients/preparer_spawner.py`
- `tools/devops_tools.py`
- `provisioner/ansible_runner.py`
- `provisioner/recovery.py`
- `provisioner/node.py`

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚: Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™

#### 7.3. ~~Ğ Ğ°Ğ·Ğ±Ğ¸Ñ‚ÑŒ ProvisionerNode.run()~~ âœ… Ğ’Ğ«ĞŸĞĞ›ĞĞ•ĞĞ (2024-12-30)

ĞœĞµÑ‚Ğ¾Ğ´ Ñ€Ğ°Ğ·Ğ±Ğ¸Ñ‚ Ğ½Ğ° 6 Ğ¿Ğ¾Ğ´Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ²:
- `_get_and_validate_server_info()` â€” 25 ÑÑ‚Ñ€Ğ¾Ğº
- `_check_max_attempts()` â€” 20 ÑÑ‚Ñ€Ğ¾Ğº
- `_init_time4vps_client()` â€” 30 ÑÑ‚Ñ€Ğ¾Ğº
- `_should_reinstall()` â€” 15 ÑÑ‚Ñ€Ğ¾Ğº
- `_run_reinstall_path()` â€” 30 ÑÑ‚Ñ€Ğ¾Ğº
- `_run_existing_access_path()` â€” 45 ÑÑ‚Ñ€Ğ¾Ğº
- `run()` â€” 50 ÑÑ‚Ñ€Ğ¾Ğº (Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ)

#### 7.4. Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ ToolExecutor Ğ¸Ğ· LLMNode

```python
# nodes/tool_executor.py
class ToolExecutor:
    def __init__(self, tools_map: dict):
        self.tools_map = tools_map

    def execute_tools(self, tool_calls: list) -> list: ...
    def execute_single_tool(self, tool_call) -> Any: ...

# nodes/base.py
class LLMNode:
    def __init__(self):
        self.tool_executor = ToolExecutor(self.tools_map)
```

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚: Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™

#### 7.5. Ğ£ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ†Ğ¸ĞºĞ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ñ‹

ĞŸĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸ `get_current_state()` Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ:
```
capabilities/base.py  â†’  state/accessor.py
```

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚: ĞĞ˜Ğ—ĞšĞ˜Ğ™

#### 7.6. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ unsafe dict access

```python
# Ğ‘Ñ‹Ğ»Ğ¾:
server_ip = server_info.get("public_ip") or server_info.get("host")

# Ğ¡Ñ‚Ğ°Ğ»Ğ¾:
@dataclass
class ServerInfo:
    public_ip: str | None
    host: str | None
    status: str
    os_template: str = "kvm-ubuntu-24.04-gpt-x86_64"

server_info = ServerInfo(**raw_dict)
server_ip = server_info.public_ip or server_info.host
```

#### 7.7. Ğ ĞµÑˆĞ¸Ñ‚ÑŒ TODO/FIXME Ğ¸Ğ»Ğ¸ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ issues Ğ² backlog Ğ´Ğ»Ñ:
- `tools/deploy.py:184` â€” Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ devops_subgraph
- `tools/infrastructure.py:102` â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ownership

---

## 8. ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµĞ¼Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ¾ÑĞ»Ğµ Ñ€ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CURRENT STATE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  langgraph (14,588 ÑÑ‚Ñ€Ğ¾Ğº, 185 Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ², ansible-core)           â”‚
â”‚  â”œâ”€â”€ LLM Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ                                            â”‚
â”‚  â”œâ”€â”€ Provisioner (ĞĞ• LLM!)                                     â”‚
â”‚  â”œâ”€â”€ SSH Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (ĞĞ• LLM!)                                    â”‚
â”‚  â””â”€â”€ Ansible runner (ĞĞ• LLM!)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TARGET STATE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  langgraph (~10,000 ÑÑ‚Ñ€Ğ¾Ğº, ~140 Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²)                       â”‚
â”‚  â”œâ”€â”€ LLM Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ                                            â”‚
â”‚  â”œâ”€â”€ Nodes (Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹)                                             â”‚
â”‚  â”œâ”€â”€ Tools (Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)                                        â”‚
â”‚  â””â”€â”€ Subgraphs                                                  â”‚
â”‚                                                                  â”‚
â”‚  infrastructure-worker (Ğ½Ğ¾Ğ²Ñ‹Ğ¹, ~2,000 ÑÑ‚Ñ€Ğ¾Ğº)                   â”‚
â”‚  â”œâ”€â”€ Provisioner                                                â”‚
â”‚  â”œâ”€â”€ SSH Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸                                               â”‚
â”‚  â”œâ”€â”€ Ansible runner                                             â”‚
â”‚  â””â”€â”€ Recovery                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ‘Ñ‹Ğ»Ğ¾ | Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ | Ğ¦ĞµĞ»ÑŒ |
|---------|------|--------|------|
| Ğ¡Ñ‚Ñ€Ğ¾Ğº ĞºĞ¾Ğ´Ğ° langgraph | 14,588 | ~14,700 | <11,000 |
| Python Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ² | 185 | 185 | <145 |
| Docker image size | ~800 MB | ~800 MB | <600 MB |
| Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ² >400 ÑÑ‚Ñ€Ğ¾Ğº | 6 | 6 | 0 |
| ĞœĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² >50 ÑÑ‚Ñ€Ğ¾Ğº | 6 | 5 | 0 |
| Hardcoded Ğ¿ÑƒÑ‚ĞµĞ¹ | 4 | **0** âœ… | 0 |
| TODO/FIXME | 3+ | 3+ | 0 |

---

## 10. ĞŸĞ»Ğ°Ğ½ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### Ğ¤Ğ°Ğ·Ğ° 1: Ğ’Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ infrastructure-worker â³
1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ `services/infrastructure-worker/`
2. ĞŸĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸ `provisioner/`, `clients/infra_client.py`
3. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Redis pub/sub Ğ´Ğ»Ñ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ²
4. Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ ansible-core Ğ¸Ğ· langgraph
5. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ docker-compose.yml

### Ğ¤Ğ°Ğ·Ğ° 2: Ğ ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² ğŸ”„
1. ~~Ğ Ğ°Ğ·Ğ±Ğ¸Ñ‚ÑŒ `ProvisionerNode.run()` Ğ½Ğ° Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹~~ âœ…
2. Ğ’Ñ‹Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ `ToolExecutor` Ğ¸Ğ· `LLMNode`
3. ~~Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹~~ âœ…

### Ğ¤Ğ°Ğ·Ğ° 3: Cleanup â³
1. Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ wrapper-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
2. Ğ£ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ñ†Ğ¸ĞºĞ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ñ‹
3. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
4. Ğ ĞµÑˆĞ¸Ñ‚ÑŒ TODO/FIXME
